{% include defs.html %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ page.title }}</title>
    <link rel="stylesheet" href="{{ site.baseurl }}/assets/css/main.css">
    {% if page.styles %}
    {% for style in page.styles %}
    <link rel="stylesheet" href="{{ style }}">
    {% endfor %}
    {% endif %}
</head>
<body>
<button id="theme-toggle">Toggle Dark Mode</button>

<a id="forkme" class="dont-print" href="{{ site.github.repository_url }}">
    <img style="position: absolute; top: 0; right: 0; border: 0;"
         src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"
         alt="Fork me on GitHub">
</a>

<ul class="menu">
    <li><a href="{{ site.baseurl }}/">Home</a></li>
    <li><a href="javascript:Dz.play()">Start slideshow</a></li>
    <li><a href="javascript:window.print()">Print</a></li>
    <li><a href="{{ github_blob }}/{{ page.path }}">Source</a></li>
    <li><a href="{{ site.baseurl }}/HELP">Help</a></li>
    <li><a href="{{ github_edit }}/{{ page.path }}">Quick edit</a></li>
</ul>

<main class="main">
    <div class="container">
        {% if page.plugins contains 'slideshow' %}
        {% include slideshow.html %}
        {% else %}
        {{ content }}
        {% endif %}
    </div>

    <footer class="container">
        <p>
            <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">
                <img alt="Creative Commons Licence" style="border-width:0"
                     src="{{ site.baseurl }}/assets/80x15.png" />
            </a>
            <a href="https://github.com/romainlebreton">Romain Lebreton</a>
            {{ site.time | date:"%Y" }}, licensed under
            <a rel="license" class="print-link"
               href="http://creativecommons.org/licenses/by-sa/4.0/">CC-BY-SA 4.0</a>.
        </p>
        <p>
            Source code available on
            <a href="{{ site.github.repository_url }}">GitHub</a>,
            static Website generated with
            <a href="http://jekyllrb.com/">Jekyll</a> and kindly hosted by
            <a href="http://pages.github.com/">GitHub</a>.
            <a href="https://github.com/defeo/class-boilerplate">Structure of the website</a>
            by <a href="http://defeo.lu">Luca De Feo</a>
        </p>
    </footer>
</main>

{% if page.plugins contains 'slideshow' %}
<script src="{{ site.baseurl }}/assets/js/dz-slides.js"></script>
{% endif %}

{% if page.plugins contains 'mathjax' %}
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        config: ["MMLorHTML.js"],
        jax: ["input/TeX","input/AsciiMath","output/HTML-CSS","output/NativeMML"],
        extensions: ["MathMenu.js","MathZoom.js"],
        TeX: {
            extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"],
        }
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
{% endif %}

{% if page.plugins contains 'highlight' %}
<script src="{{ site.baseurl }}/assets/js/highlight.pack.js"></script>
<script>
    hljs.configure({
        tabReplace: '    '
    });
    hljs.initHighlightingOnLoad();
</script>
{% endif %}

{% for s in page.scripts %}
<script src="{{ s }}"></script>
{% endfor %}

<script>
    const themeToggle = document.getElementById('theme-toggle');
    const htmlElement = document.documentElement;

    themeToggle.addEventListener('click', () => {
        htmlElement.classList.toggle('dark-theme');
        const isDarkTheme = htmlElement.classList.contains('dark-theme');
        localStorage.setItem('darkTheme', isDarkTheme);
        themeToggle.textContent = isDarkTheme ? 'Toggle Light Mode' : 'Toggle Dark Mode';
    });

    // Check for saved theme preference
    const savedTheme = localStorage.getItem('darkTheme');
    if (savedTheme === 'true') {
        htmlElement.classList.add('dark-theme');
        themeToggle.textContent = 'Toggle Light Mode';
    }
</script>
</body>
</html>